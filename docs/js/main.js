const L=document.querySelector(".js-input"),C=document.querySelector(".js-btnSearch"),m=document.querySelector(".js-containerFav"),f=document.querySelector(".js-containerRes"),y=document.querySelector(".js-removeFav"),I=document.querySelector(".js-reset"),g=document.querySelector(".js-Fav"),h=document.querySelector(".js-Res");let o="",a=[],i=[];function A(e){e.preventDefault();const n=`https://api.jikan.moe/v4/anime?q=${L.value.toLowerCase()}`;fetch(n).then(s=>s.json()).then(s=>{a=s.data,r(a,f)})}function r(e,t){i.length>0?g.classList.remove("hidden"):g.classList.add("hidden"),a.length>0?h.classList.remove("hidden"):h.classList.add("hidden"),t.innerHTML="";const n=JSON.parse(localStorage.getItem("series"));for(const s of e){const S=document.createTextNode(s.title);let l=s.images.jpg.image_url;l==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"&&(l="https://placehold.co/210x295?text=NoImageFound");const d=document.createElement("li"),c=document.createElement("article"),u=document.createElement("img"),v=document.createElement("h3"),p=document.createElement("i");if(c.appendChild(p),p.setAttribute("class","fa-solid fa-circle-xmark js-btnRemove card__btn"),u.setAttribute("src",l),u.setAttribute("class","card__img"),u.setAttribute("alt","imagen anime"),c.appendChild(u),t.appendChild(d),d.setAttribute("class","list"),d.appendChild(c),v.setAttribute("class","card__title"),v.appendChild(S),c.setAttribute("id",s.mal_id),c.setAttribute("class","js-article card"),c.appendChild(v),t===f){if(d.classList.add("js-liResult"),c.removeChild(p),n)for(const j of n)parseInt(c.id)===j.mal_id&&c.classList.add("favorite");t.appendChild(d)}E(),k()}}function k(){const e=document.querySelectorAll(".js-btnRemove");for(const t of e)t.addEventListener("click",x)}function E(){const e=document.querySelectorAll(".js-article");for(const t of e)t.addEventListener("click",q)}function q(e){o=e.currentTarget,o.classList.contains("favorite")?F():_()}function F(e){o.classList.remove("favorite");const t=o.id;b(t)}function _(e){if(o.parentElement.classList.contains("js-liResult")){o.classList.add("favorite");const n=o.id,s=a.find(l=>parseInt(n)===l.mal_id);i.findIndex(l=>l.mal_id===parseInt(n))===-1&&i.push(s)}r(i,m),localStorage.setItem("series",JSON.stringify(i))}function x(e){const n=e.currentTarget.parentElement,s=n.id;b(s),N(n)}function N(e){const t=document.querySelectorAll(".js-article");for(const n of t){const s=n.id;e.id===s&&n.classList.remove("favorite")}}function b(e){const t=i.findIndex(n=>n.mal_id===parseInt(e));i.splice(t,1),localStorage.setItem("series",JSON.stringify(i)),r(i,m)}C.addEventListener("click",A);function J(){const e=JSON.parse(localStorage.getItem("series"));e&&(i=e,r(i,m))}J();function R(){i=[],localStorage.setItem("series",JSON.stringify(i)),r(i,m),r(a,f)}y.addEventListener("click",R);function O(e){e.preventDefault(),R(),a=[],L.value="",r(a,f)}I.addEventListener("click",O);
//# sourceMappingURL=main.js.map
